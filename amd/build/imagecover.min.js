define(["jquery","filter_ally/util"],function(a,b){return new function(){var c=function(){a(".ally-image-wrapper").each(function(){var c=this,d=a(c).find("img"),e=a(c).find(".ally-image-cover"),f=a(c).find(".ally-feedback"),g=parseInt(a(d).css("marginTop")),h=parseInt(a(d).css("marginLeft")),i=b.debounce(function(b){var c=b.right-b.left,i=b.bottom-b.top;a(e).css("width",c+"px").css("height",i+"px");var j=a(d).position().top+g,k=a(d).position().left+h;a(e).css("top",j+"px").css("left",k+"px"),f.length&&f.css("top",j+i-f.height()+"px").css("left",k+"px")},1e3);b.onCoordsChange(d,function(a){i(a)})})};this.init=function(){a(document).ready(c)}}});