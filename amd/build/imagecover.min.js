define("filter_ally/imagecover",["exports","jquery","filter_ally/util"],(function(_exports,_jquery,_util){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classPrivateMethodInitSpec(obj,privateSet){!function(obj,privateCollection){if(privateCollection.has(obj))throw new TypeError("Cannot initialize the same private elements twice on an object")}(obj,privateSet),privateSet.add(obj)}function _classPrivateMethodGet(receiver,privateSet,fn){if(!privateSet.has(receiver))throw new TypeError("attempted to get private field on non-instance");return fn}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_jquery=_interopRequireDefault(_jquery),_util=_interopRequireDefault(_util);var _applySizing=new WeakSet;function _applySizing2(){(0,_jquery.default)(".ally-image-wrapper").each((function(){if((0,_jquery.default)(this).attr("data-processed"))return;(0,_jquery.default)(this).attr("data-processed",1);const img=(0,_jquery.default)(this).find("img"),cover=(0,_jquery.default)(this).find(".ally-image-cover"),feedback=(0,_jquery.default)(this).find(".ally-feedback"),marginTop=parseInt((0,_jquery.default)(img).css("marginTop")),marginLeft=parseInt((0,_jquery.default)(img).css("marginLeft")),debounceCoordsChanged=_util.default.debounce((function(coords){const width=coords.right-coords.left,height=coords.bottom-coords.top;(0,_jquery.default)(cover).css("width",width+"px").css("height",height+"px");const topPos=(0,_jquery.default)(img).position().top+marginTop,leftPos=(0,_jquery.default)(img).position().left+marginLeft;(0,_jquery.default)(cover).css("top",topPos+"px").css("left",leftPos+"px"),feedback.length&&feedback.css("top",topPos+height-feedback.height()+"px").css("left",leftPos+"px")}),1e3);_util.default.onCoordsChange(img,(function(coords){debounceCoordsChanged(coords)}))}))}var _default=new class{constructor(){_classPrivateMethodInitSpec(this,_applySizing)}init(){(0,_jquery.default)(document).ready(_classPrivateMethodGet(this,_applySizing,_applySizing2));const targetNode=document,observerOptions={childList:!0,attributes:!0,subtree:!0};(0,_jquery.default)(document).on("snap-course-content-loaded",(()=>{const observer=new MutationObserver((()=>{let count=0,interval=setInterval((()=>{count<5?(_classPrivateMethodGet(this,_applySizing,_applySizing2).call(this),count++):clearTimeout(interval)}),500);observer.disconnect()}));observer.observe(targetNode,observerOptions)}))}};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=imagecover.min.js.map