define(["jquery"],function(a){return new function(){this.whenTrue=function(b,c){c=c?c:10;var d=a.Deferred(),e=0;return setInterval(function(){e=e?e+1:0,e>c&&d.reject(),b()&&d.resolve()},200),d.promise()},this.onCoordsChange=function(b,c){var d={},e=null,f=function(){var f=b.offset(),g=b.width(),h=b.height(),i={top:f.top,right:f.left+g,bottom:f.top+h,left:f.left};if(i.top!==d.top||i.right!==d.right||i.bottom!==d.bottom||i.left!==d.left)return d=i,a.contains(document.documentElement,b[0])?c(d):void(e&&(clearInterval(e),e=null))};e=setInterval(f,200),f()},this.getQuery=function(a){var b={};return a.replace(/[?&](.+?)=([^&#]*)/g,function(a,c,d){b[c]=decodeURI(d).replace(/\+/g," ")}),b},this.debounce=function(b,c,d){var e;return function(){var f=a.Deferred(),g=this,h=arguments,i=function(){e=null,d||f.resolve(b.apply(g,h))},j=d&&!e;return clearTimeout(e),e=setTimeout(i,c),j&&f.resolve(b.apply(g,h)),f}}}});